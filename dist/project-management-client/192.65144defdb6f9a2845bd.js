"use strict";(self.webpackChunkproject_management_client=self.webpackChunkproject_management_client||[]).push([[192],{62192:(B,A,i)=>{i.r(A),i.d(A,{AuthModule:()=>W});var g=i(38583),r=i(3679),q=i(81693),F=i(93738),S=i(1769),C=i(33935),w=i(12522),U=i(76627),y=i(7539),_=i(4929),E=i(38590),T=i(51095),k=i(94935),J=i(77746),f=i(22238),p=i(98295),v=i(49983),N=i(67441),h=i(8307),e=i(37716),b=i(49344),Z=i(15328),Y=i(72458);function x(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function M(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function O(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function P(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function j(t,a){if(1&t&&(e.TgZ(0,"mat-form-field",4),e.TgZ(1,"mat-label"),e._uU(2,"password"),e.qZA(),e._UZ(3,"input",20),e.YNc(4,P,2,0,"mat-error",6),e.qZA()),2&t){const n=e.oxw();let o;e.xp6(4),e.Q6J("ngIf",null==n.userForm||null==(o=n.userForm.get("password"))?null:o.hasError("required"))}}function Q(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function V(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}function z(t,a){if(1&t&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",null==n?null:n.key),e.xp6(1),e.hij(" ",null==n?null:n.viewValue,"")}}function L(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required"),e.qZA())}let I=(()=>{class t{constructor(n,o,s,m){this.matDialogRef=n,this.data=o,this.toastrService=s,this.authService=m,this.designations=[{key:"ASE",viewValue:"Associate Software Engineer"},{key:"SE",viewValue:"Software Engineer"},{key:"SSE",viewValue:"Senior Software Engineer"},{key:"ATL",viewValue:"Associate Technical Lead"},{key:"TL",viewValue:"Technical Lead"},{key:"AT",viewValue:"Architecht"},{key:"PM",viewValue:"Project Manager"}],this.initializeForm=()=>{this.userForm=new r.cw({userName:new r.NI(null,r.kI.required),firstName:new r.NI(null,r.kI.required),lastName:new r.NI(null,r.kI.required),middleName:new r.NI(null),userEmail:new r.NI(null,r.kI.required),password:new r.NI(null),contact:new r.NI(null,r.kI.required),userAddress:new r.NI(null),nic:new r.NI(null),passportId:new r.NI(null),roles:new r.NI(null),profilePic:new r.NI(null),skills:new r.NI(null),projectType:new r.NI(null),designation:new r.NI(null,r.kI.required)})},this.patchUserForm=()=>{this.userForm.patchValue(this.user)},this.closeModal=()=>{this.matDialogRef.close()},this.saveUser=()=>{if(Object.keys(this.userForm.controls).forEach(c=>{const l=this.userForm.get(c);null==l||l.markAsTouched(),null==l||l.updateValueAndValidity({onlySelf:!0})}),this.userForm.valid){const c=this.userForm.getRawValue();let l=new FormData;l.append("profileImage","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVamKPfw0_YElX1zi2NykJl0Ee3zc2wi22fA&usqp=CAU"),l.append("userPayload",JSON.stringify(c)),this.authService.saveUser(l).subscribe(u=>{u&&(this.toastrService.success("Successfully saved.","Success"),this.authService.onUserAfterSave.emit(c),this.closeModal())},u=>{console.log(u)})}else this.toastrService.error("Please check the form again.","Error")}}ngOnInit(){var n;this.initializeForm(),this.data?(this.user=this.data.user,this.patchUserForm()):null===(n=this.userForm.get("password"))||void 0===n||n.setValidators(r.kI.required)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.so),e.Y36(f.WI),e.Y36(b._W),e.Y36(Z.Tq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sign-up"]],inputs:{user:"user"},decls:54,vars:10,consts:[[1,"flex","justify-between","items-center"],["mat-icon-button","",3,"click"],[1,"overflow-auto","pt-4",3,"formGroup"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","placeholder","User Name","formControlName","userName"],[4,"ngIf"],["appearance","outline",1,"flex-1","pl-6"],["matInput","","placeholder","First Name","formControlName","firstName"],["matInput","","placeholder","lastName","formControlName","lastName"],["matInput","","placeholder","User Email","formControlName","userEmail"],["class","flex-1","appearance","outline",4,"ngIf"],["matInput","","placeholder","Contact","formControlName","contact"],["id","projectType","formControlName","projectType"],["value","integritas"],["value","non-integritas"],["id","designation","formControlName","designation","placeholder","Designation"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",3,"click"],["matInput","","placeholder","password","formControlName","password"],[3,"value"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h2"),e._uU(2,"Register User"),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return o.closeModal()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"div",3),e.TgZ(8,"mat-form-field",4),e.TgZ(9,"mat-label"),e._uU(10,"User Name"),e.qZA(),e._UZ(11,"input",5),e.YNc(12,x,2,0,"mat-error",6),e.qZA(),e.TgZ(13,"mat-form-field",7),e.TgZ(14,"mat-label"),e._uU(15,"First Name"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,M,2,0,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(18,"div",3),e.TgZ(19,"mat-form-field",4),e.TgZ(20,"mat-label"),e._uU(21,"lastName"),e.qZA(),e._UZ(22,"input",9),e.qZA(),e.TgZ(23,"mat-form-field",7),e.TgZ(24,"mat-label"),e._uU(25,"User Email"),e.qZA(),e._UZ(26,"input",10),e.YNc(27,O,2,0,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(28,"div",3),e.YNc(29,j,5,1,"mat-form-field",11),e.TgZ(30,"mat-form-field",7),e.TgZ(31,"mat-label"),e._uU(32,"Contact"),e.qZA(),e._UZ(33,"input",12),e.YNc(34,Q,2,0,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"mat-form-field",4),e.TgZ(37,"mat-label"),e._uU(38,"Project Type"),e.qZA(),e.TgZ(39,"mat-select",13),e.TgZ(40,"mat-option",14),e._uU(41,"Integritas"),e.qZA(),e.TgZ(42,"mat-option",15),e._uU(43,"Non-Integritas"),e.qZA(),e.qZA(),e.YNc(44,V,2,0,"mat-error",6),e.qZA(),e.TgZ(45,"mat-form-field",7),e.TgZ(46,"mat-label"),e._uU(47,"Designation"),e.qZA(),e.TgZ(48,"mat-select",16),e.YNc(49,z,2,2,"mat-option",17),e.qZA(),e.YNc(50,L,2,0,"mat-error",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",18),e.TgZ(52,"button",19),e.NdJ("click",function(){return o.saveUser()}),e._uU(53),e.qZA(),e.qZA()),2&n){let s,m,c,l,u,d;e.xp6(6),e.Q6J("formGroup",o.userForm),e.xp6(6),e.Q6J("ngIf",null==o.userForm||null==(s=o.userForm.get("userName"))?null:s.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==o.userForm||null==(m=o.userForm.get("firstName"))?null:m.hasError("required")),e.xp6(10),e.Q6J("ngIf",null==o.userForm||null==(c=o.userForm.get("userEmail"))?null:c.hasError("required")),e.xp6(2),e.Q6J("ngIf",!o.user),e.xp6(5),e.Q6J("ngIf",null==o.userForm||null==(l=o.userForm.get("contact"))?null:l.hasError("required")),e.xp6(10),e.Q6J("ngIf",null==o.userForm||null==(u=o.userForm.get("projectType"))?null:u.hasError("required")),e.xp6(5),e.Q6J("ngForOf",o.designations),e.xp6(1),e.Q6J("ngIf",null==o.userForm||null==(d=o.userForm.get("designation"))?null:d.hasError("required")),e.xp6(3),e.Oqu(o.user?"Update":"Save")}},directives:[T.lW,U.Hw,r.JL,r.sg,p.KE,p.hX,v.Nt,r.Fj,r.JJ,r.u,g.O5,N.gD,Y.ey,g.sg,p.TO],styles:[""]}),t})();function D(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required "),e.qZA())}function X(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"This field is required "),e.qZA())}const R=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},directives:[h.lC],styles:[""]}),t})(),children:[{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"sign-in",component:(()=>{class t{constructor(n,o,s,m,c){this.matDialog=n,this.authService=o,this.router=s,this.tokenManagementService=m,this.loggedUserService=c,this.isUserAlreadyLoggedIn=()=>{this.loggedUserService.isUserLoggedIn()?this.router.navigate(["/dashboard"]):this.router.navigate(["/auth"])},this.initializeForm=()=>{this.authForm=new r.cw({userNameOrEmail:new r.NI(null,r.kI.required),password:new r.NI(null,r.kI.required)})},this.openModal=()=>{this.matDialog.open(I,{width:"60%",height:"auto",data:null})},this.loginToSystem=()=>{this.authForm.valid&&this.authService.authenticateUser(this.authForm.value).subscribe(u=>{if(u&&u.result){const d=u.result.accessToken;d&&(this.router.navigate(["/dashboard"]),this.tokenManagementService.storeToken(d))}},u=>{console.log(u)})}}ngOnInit(){this.initializeForm(),this.isUserAlreadyLoggedIn()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.uw),e.Y36(Z.Tq),e.Y36(h.F0),e.Y36(Z.rH),e.Y36(Z.Uc))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sign-in"]],decls:23,vars:3,consts:[[1,"auth-container"],[1,"auth-container__auth-content"],[1,"p-2","flex","justify-center"],["src","./assets/user.svg","alt","avatar",1,"w-60"],[1,"p-2",3,"formGroup"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","placeholder","User Name / Email","formControlName","userNameOrEmail"],[4,"ngIf"],["matInput","","type","password","placeholder","Password","formControlName","password"],[1,"flex","ml-1"],["mat-raised-button","","color","primary",1,"ml-1",3,"click"],["mat-button","","color","primary",1,"ml-1",3,"click"],[1,"auth-container__background"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"mat-form-field",6),e.TgZ(7,"mat-label"),e._uU(8,"User Name / Email"),e.qZA(),e._UZ(9,"input",7),e.YNc(10,D,2,0,"mat-error",8),e.qZA(),e.qZA(),e.TgZ(11,"div",5),e.TgZ(12,"mat-form-field",6),e.TgZ(13,"mat-label"),e._uU(14,"Password"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,X,2,0,"mat-error",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"button",11),e.NdJ("click",function(){return o.loginToSystem()}),e._uU(19,"Login"),e.qZA(),e.TgZ(20,"button",12),e.NdJ("click",function(){return o.openModal()}),e._uU(21,"Register"),e.qZA(),e.qZA(),e.qZA(),e._UZ(22,"div",13),e.qZA()),2&n){let s,m;e.xp6(4),e.Q6J("formGroup",o.authForm),e.xp6(6),e.Q6J("ngIf",null==(s=o.authForm.get("userNameOrEmail"))?null:s.hasError("required")),e.xp6(6),e.Q6J("ngIf",null==o.authForm||null==(m=o.authForm.get("Password"))?null:m.hasError("required"))}},directives:[r.JL,r.sg,p.KE,p.hX,v.Nt,r.Fj,r.JJ,r.u,g.O5,T.lW,p.TO],styles:[".auth-container[_ngcontent-%COMP%]{height:100vh;display:grid;grid-template-columns:[auth-content-starts] 25% [auth-content-ends auth-content-background-starts] 75% [auth-content-background-ends];grid-template-rows:auto}.auth-container__auth-content[_ngcontent-%COMP%]{grid-column:auth-content-starts/auth-content-ends}.auth-container__background[_ngcontent-%COMP%]{grid-column:auth-content-background-starts/auth-content-background-ends;background-image:url(https://wallpaper.dog/large/20407840.png);background-repeat:no-repeat;background-size:cover}"]}),t})()},{path:"sign-up",component:I},{path:"reset-password",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-forget-password"]],decls:2,vars:0,template:function(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"forget-password works!"),e.qZA())},styles:[""]}),t})()},{path:"**",redirectTo:"sign-in"}]},{path:"**",redirectTo:""}];let G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,h.Bz.forChild(R)],h.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,G,r.u5,r.UX,F.QW,S.t,C.Tx,w.g0,U.Ps,y.p9,_.N6,E.AV,T.ot,k.SJ,J.ie,f.Is,p.lN,v.c,N.LD,q.Xd]]}),t})()}}]);